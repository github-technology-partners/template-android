{
  "name": "Android Codespace",
  "image": "mcr.microsoft.com/vscode/devcontainers/java:11",
  "extensions": [
    "gabrielbb.vscode-lombok",
    "visualstudioexptteam.vscodeintellicode",
    "vscjava.vscode-java-pack",
    "redhat.java",
    "vscjava.vscode-java-dependency",
    "vscjava.vscode-java-test",
    "vscjava.vscode-maven"
  ],
  "settings": {
    "java.home": "/usr/lib/jvm/java-11-openjdk-amd64",
    "java.configuration.maven.userSettings": "/root/.m2/settings.xml"
  },
  "forwardPorts": [
    8080,
    5005
  ],
  "postCreateCommand": "apt-get update && apt-get install -y curl unzip && apt-get clean",
  "runArgs": [
    "--cap-add=SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined"
  ],
  "workspaceMount": "source=${localWorkspaceFolder},target=/root/workspace,type=bind,consistency=cached",
  "workspaceFolder": "/root/workspace",
  "workspaceReloadConfig": {
    "pattern": "**/*.java",
    "ignore": [
      "**/.git/**",
      "**/.svn/**",
      "**/.hg/**",
      "**/CVS/**",
      "**/.DS_Store/**"
    ]
  },
  "postStartCommand": "curl -o /tmp/sdk-tools.zip https://dl.google.com/android/repository/commandlinetools-linux-7583922_latest.zip && \
                       unzip -d /opt/android-sdk /tmp/sdk-tools.zip && \
                       rm /tmp/sdk-tools.zip && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk --licenses && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk 'platform-tools' && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk 'build-tools;30.0.2' && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk 'platforms;android-30' && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk 'extras;google;m2repository' && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk 'extras;android;m2repository' && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk 'patcher;v4' && \
                       yes | /opt/android-sdk/cmdline-tools/bin/sdkmanager --sdk_root=/opt/android-sdk 'cmdline-tools;latest' && \
                       yes | /opt/android-sdk/cmdline-tools/latest/bin/sdkmanager --sdk_root=/opt/android-sdk 'ndk;22.0.7026061' && \
                       yes | /opt/android-sdk/cmdline-tools/latest/bin/sdkmanager --sdk_root=/opt/android-sdk 'cmake;3.10.2.4988404'",
  "postAttachCommand": "apt-get install -y openssh-server && \
                        echo 'root:Docker!' | chpasswd && \
                        sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config && \
                        service ssh start"
}
